<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean AI</title>
    <meta name="description" content="Portfolio for world-renowned software engineer soyeon">
    <meta name="author" content="soyeon">

    <script src="https://kit.fontawesome.com/7ebfe642cb.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="studioStyle1.css"/>
    <script src="studio1.js" defer></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2.4.1/dist/email.min.js"> </script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
</head>

<body>
    <section id="home">
      <div id="stage" class="shrink-wrap">

        
          <!-- ê¸°ì¡´ ì½˜í…ì¸  -->
        <div class="shrink-scale">
          <div class="your-panel">
            <div class="wrap">
                <!-- í•˜ë‹¨: ë„ë„› + ë²”ë¡€ -->
                <div class="card"  data-step="0">
                  <div class="main">
                    <div class="box" id="donutBox">
                      <h2 id="stepTitle">2ë‹¨ê³„</h2>
                      <svg id="donut" viewBox="0 0 240 240" aria-label="ë„ë„›ì°¨íŠ¸">
                        <circle cx="120" cy="120" r="84" fill="none" stroke="#eef1f5" stroke-width="24"/>
                        <g id="segments" transform="rotate(-90 120 120)"></g>
                        <g>
                          <text x="120" y="110" class="centerText muted" font-size="12">ì™„ë£Œ</text>
                          <text id="centerMain" x="120" y="130" class="centerText">0 / 5</text>
                        </g>
                      </svg>
                      <div class="hint">â€¢ ë¸”ë¡ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ ë‹¨ê³„ë¡œ ì „í™˜ë˜ë©° ë„ë„›ì€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ì¼ë¶€ ì„ íƒ=íšŒìƒ‰, ì „ë¶€ ì„ íƒ=íŒŒë€ìƒ‰.</div>
                    </div>
                   <div class="box" id="box">
                        <div class="slideshow-container">
                          <div class="slide">
                             ì•ì—ì„œ ì„ íƒí•œ ë°ì´í„°ë¥¼ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ì „ì²˜ë¦¬ê°€ í•„ìš”í•´ìš”.
                          </div>

                          <!-- ë²„íŠ¼ -->
                          <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                          <a class="next" onclick="plusSlides(1)">&#10095;</a>

                          <!-- ì  -->
                          <div class="dots">
                            <span class="dot" onclick="currentSTSlide(1)"></span>
                            <span class="dot" onclick="currentSlide(2)"></span>
                            <span class="dot" onclick="currentSlide(3)"></span>
                          </div>
                          
                        </div>
                
                        <div class="recommand" id="recommand"></div>
                            <button id="choiceBtn" >í•­ëª©ì„ íƒí•˜ê¸°</button>
                        </div>
                         
                       </div>     
                      </div> 
                    </div> 
                  </div>
                  </div> 
                </div>
            </div>
          </div>
  
    </div>
    </section>
<!-- Modal -->
<div id="choiceModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    
    <h2>í•­ëª© ì„ íƒ</h2>
    <div class="modal-boxes">
      <div class="box" data-key="box1">ë°•ìŠ¤ 1</div>
      <div class="box" data-key="box2">ë°•ìŠ¤ 2</div>
      <div class="box" data-key="box3">ë°•ìŠ¤ 3</div>
      <div class="box" data-key="box4">ë°•ìŠ¤ 4</div>
      <div class="box" data-key="box5">ë°•ìŠ¤ 5</div>
      <div class="box" data-key="box6">ë°•ìŠ¤ 6</div>
      <div class="box" data-key="box7">ë°•ìŠ¤ 7</div>
      <div class="box" data-key="box8">ë°•ìŠ¤ 8</div>
      <div class="box" data-key="box9">ë°•ìŠ¤ 9</div>
      <div class="box" data-key="box10">ë°•ìŠ¤ 10</div>
      <div class="box" data-key="box11">ë°•ìŠ¤ 11</div>
      <div class="box" data-key="box12">ë°•ìŠ¤ 12</div>
      <div class="box" data-key="box13">ë°•ìŠ¤ 13</div>
      <div class="box" data-key="box14">ë°•ìŠ¤ 14</div>
      <div class="box" data-key="box15">ë°•ìŠ¤ 15</div>
      <div class="box" data-key="box16">ë°•ìŠ¤ 16</div>
      <div class="box" data-key="box17">ë°•ìŠ¤ 17</div>
      <div class="box" data-key="box18">ë°•ìŠ¤ 18</div>
      <div class="box" data-key="box19">ë°•ìŠ¤ 19</div>
      <div class="box" data-key="box20">ë°•ìŠ¤ 20</div>
      <div class="box" data-key="box21">ë°•ìŠ¤ 21</div>
      <div class="box" data-key="box22">ë°•ìŠ¤ 22</div>
      <div class="box" data-key="box23">ë°•ìŠ¤ 23</div>
      <div class="box" data-key="box24">ë°•ìŠ¤ 24</div>
      <div class="box" data-key="box25">ë°•ìŠ¤ 25</div>
    </div>
  </div>
</div>
</body>
</html>

<script>

  (() => {
  let __slideTimer = null;

  // ì•ˆì „ì¥ì¹˜: í˜ì´ì§€ ìˆ¨ê¹€ ì‹œ ì¼ì‹œì •ì§€(ì„ íƒ)
  function stopSlideShow() {
    clearInterval(__slideTimer);
    __slideTimer = null;
  }
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) stopSlideShow();
  });

  // ë¶€ëª¨ê°€ ë³´ë‚´ëŠ” ì‹ í˜¸ë¥¼ ë°›ì€ ë’¤ì—ë§Œ ì‹œì‘
  window.addEventListener('message', (e) => {
    if (e?.data?.type === 'START_SLIDES') {
      window.startSlideShow(e.data.interval || 3000);
    }
  });

  
})();

// ===== #signup3 í¼ â†” ë„ë„› ì—°ë™ (í¼ì´ ë“¤ì–´ìˆëŠ” ì¹´ë“œ ì•ˆì˜ ë„ë„›ë§Œ ë‹¤ì‹œ ê·¸ë¦¼) =====
(function bindDonutToSignup3(){
  const form = document.getElementById('signup3');
  if (!form) return;

  // í¼ì´ ë“¤ì–´ìˆëŠ” ì¹´ë“œ ì»¨í…Œì´ë„ˆ ê¸°ì¤€ìœ¼ë¡œ ë„ë„› ìš”ì†Œ ì°¾ê¸°(ì¤‘ë³µ ID ì•ˆì „)
  const container   = form.closest('.card[data-step]') || document;
  const segGroup    = container.querySelector('#segments');
  const centerMain  = container.querySelector('#centerMain');
  const stepTitleEl = container.querySelector('#stepTitle');

  // (ì „ì—­ cfgê°€ ì—†ì„ ë•Œ ëŒ€ë¹„í•œ ê¸°ë³¸ê°’)
  const cfgLocal = window.cfg || {
    cx:120, cy:120, r:84, width:24, gapDeg:4,
    colorOn: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim() || '#2b6fff',
    colorOff: getComputedStyle(document.documentElement).getPropertyValue('--base').trim() || '#eef1f5'
  };

  const toRad  = d => d * Math.PI / 180;
  const polar  = (cx,cy,r,a)=>({ x: cx + r*Math.cos(toRad(a)), y: cy + r*Math.sin(toRad(a)) });
  const arcPath = (cx,cy,r,start,end)=>{
    const s = polar(cx,cy,r,start), e = polar(cx,cy,r,end);
    const large = ((end-start)%360) > 180 ? 1 : 0;
    return `M ${s.x} ${s.y} A ${r} ${r} 0 ${large} 1 ${e.x} ${e.y}`;
  };

  const fields = Array.from(form.querySelectorAll('input, select, textarea'))
    .filter(el => !el.disabled && el.type !== 'hidden');

  const isFilled = (el) => {
    if (el.type === 'checkbox' || el.type === 'radio') return el.checked;
    if (el.type === 'file') return (el.files?.length || 0) > 0;
    return (el.value || '').trim().length > 0;
  };

  function repaint(filled, total){
    if (!segGroup || !centerMain) return;
    segGroup.innerHTML = '';

    const gaps = cfgLocal.gapDeg * total;
    let cur = 0;
    for (let i=0; i<total; i++){
      const selected = i < filled;
      const sweep = (1/total) * (360 - gaps);
      const start = cur, end = cur + sweep; cur = end + cfgLocal.gapDeg;

      const path = document.createElementNS('http://www.w3.org/2000/svg','path');
      path.setAttribute('d', arcPath(cfgLocal.cx,cfgLocal.cy,cfgLocal.r,start,end));
      path.setAttribute('fill','none');
      path.setAttribute('stroke', selected ? cfgLocal.colorOn : cfgLocal.colorOff);
      path.setAttribute('stroke-width', cfgLocal.width);
      path.setAttribute('stroke-linecap','round');
      segGroup.appendChild(path);
    }

    centerMain.textContent = `${filled} / ${total}`;
    if (stepTitleEl) {
      const stepIdx = Number(container.dataset.step || 0);
      const stepName = (window.steps && window.steps[stepIdx]?.name) || '';
      stepTitleEl.textContent = `${stepIdx + 1}ë‹¨ê³„ Â· ${stepName}`;
    }
  }

  function update(){
    const total  = fields.length;
    const filled = fields.reduce((n, el) => n + (isFilled(el) ? 1 : 0), 0);
    repaint(filled, total);
  }

  fields.forEach(el => el.addEventListener('input',  update));
  fields.forEach(el => el.addEventListener('change', update));

  // ì´ˆê¸° 1íšŒ ê°±ì‹ 
  update();
})();
(function setupRecommandInput() {
  const rc = document.getElementById("recommand");
  const input = document.getElementById("recommandInput");
  if (!rc || !input) return;

  input.addEventListener("change", () => {   // ì…ë ¥ ëë‚˜ê³  focus out
    addCollapseBelow(rc, input.value.trim());
  });

  input.addEventListener("keydown", (e) => { // ì—”í„° ëˆ„ë¥´ë©´ collapse ì¶”ê°€
    if (e.key === "Enter") {
      e.preventDefault();
      addCollapseBelow(rc, input.value.trim());
    }
  });

  function addCollapseBelow(container, text) {
    if (!text) return;

    // ê¸°ì¡´ collapse ìˆìœ¼ë©´ ì œê±°
    const oldCollapse = container.querySelector(".dynamic-collapse");
    if (oldCollapse) oldCollapse.remove();

    // collapse ìƒˆë¡œ ì¶”ê°€
    const collapseEl = document.createElement("div");
    collapseEl.className = "collapse dynamic-collapse";
    collapseEl.innerHTML = `
      <button class="collapse__btn" id="rc-btn" aria-expanded="false" aria-controls="rc-panel">
        ì…ë ¥ ê²°ê³¼ ë³´ê¸°
      </button>
      <div class="collapse__content" id="rc-panel" role="region" aria-labelledby="rc-btn">
        <p>ì…ë ¥í•œ ë‚´ìš©: <strong>${text}</strong></p>
        <p>ì—¬ê¸°ì— ì¶”ì²œ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì„¤ëª…ì´ë‚˜ ì˜µì…˜ì„ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      </div>
    `;
    container.appendChild(collapseEl);

    // collapse í† ê¸€ ì´ë²¤íŠ¸
    const btn = collapseEl.querySelector(".collapse__btn");
    const panel = collapseEl.querySelector(".collapse__content");
    btn.addEventListener("click", () => {
      const willOpen = panel.classList.toggle("open");
      btn.setAttribute("aria-expanded", willOpen);
    });
  }
})();

// ë§ˆì§€ë§‰ input(5ë²ˆì§¸)ì—ì„œë§Œ confirm ì‹¤í–‰
document.addEventListener('input', (e) => {
  if (!e.target.matches('#recommand .recommend-input')) return;

  const rc = document.getElementById('recommand');
  if (!rc) return;

  const inputs = rc.querySelectorAll('.recommend-input');

  // ğŸ”¹ ë§ˆì§€ë§‰ input(ì˜ˆ: 5ë²ˆì§¸)
  if (inputs.length === 4) {
    const lastInput = inputs[inputs.length - 1];

    if (e.target === lastInput && lastInput.value.trim() !== '') {
      // ì´ë¯¸ ìƒì„±ëœ ë§í¬ê°€ ì—†ë‹¤ë©´ rcì˜ ë§¨ ì•„ë˜ì— ì¶”ê°€
      if (!rc.querySelector('.go-next-link')) {
        rc.insertAdjacentHTML("beforeend", `
          <div class="go-next-wrapper">
            <a href="/studio.html?step=2" target="_parent" class="go-next-link">
              ğŸ‘‰ 3stepìœ¼ë¡œ ì´ë™í•˜ê¸°
            </a>
          </div>
        `);
      }
    }
  }
});

function fitRecommandToViewport(){
  const el = document.getElementById('recommand');
  if (!el) return;

  const rect = el.getBoundingClientRect();
  const bottomGap = 16; // í•˜ë‹¨ ì—¬ìœ 
  const excelBar = document.getElementById('excelBar');
  const barH = (excelBar && excelBar.classList.contains('show'))
    ? excelBar.getBoundingClientRect().height + 12
    : 0;

  const avail = Math.max(200, window.innerHeight - rect.top - bottomGap - barH);
  el.style.setProperty('--rc-max-h', `${avail}px`);
}

// ìµœì´ˆ/ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ë°˜ì˜
window.addEventListener('load', fitRecommandToViewport);
window.addEventListener('resize', fitRecommandToViewport);

// #recommand ë‚´ë¶€ê°€ ë³€í•  ë•Œë„ ê°±ì‹ 
const rcEl = document.getElementById('recommand');
if (rcEl) {
  const mo = new MutationObserver(() => requestAnimationFrame(fitRecommandToViewport));
  mo.observe(rcEl, { childList:true, subtree:true });
}

// ask-wrap ì¶”ê°€/ì •ë ¬ ë“± ì£¼ìš” í•¨ìˆ˜ ë’¤ì—ë„ í˜¸ì¶œ(ì •ì˜ë¼ ìˆìœ¼ë©´ ë®ì–´ì”Œì›Œ í›… ì—°ê²°)
['addAskWrap','enableAskWrapDragSort','reindexAskWraps','buildSelectBoxes'].forEach(fn=>{
  if (typeof window[fn] === 'function') {
    const orig = window[fn];
    window[fn] = function(...args){
      const r = orig.apply(this, args);
      requestAnimationFrame(fitRecommandToViewport);
      return r;
    };
  }
});

// ask-wrap ì—´ê³  ë‹«ì„ ë•Œë„ ì¬ê³„ì‚°
document.addEventListener('click', (e)=>{
  if (e.target.closest('.ask-wrap')) {
    requestAnimationFrame(fitRecommandToViewport);
  }
});

</script>
