<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean AI</title>
    <meta name="description" content="Portfolio for world-renowned software engineer soyeon">
    <meta name="author" content="soyeon">

    <script src="https://kit.fontawesome.com/7ebfe642cb.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="studioStyle2.css"/>
    <script src="home.js" defer></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2.4.1/dist/email.min.js"> </script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
</head>

<body>
     <nav id="navbar">
        <div class="navbar__logo"> 
            <a href="index.html">Ocean Ai</a>
        </div>
            <ul class="navbar__menu">
                  <a href="studio.html"><li class="navbar__menu__item" data-link="#about">디자인스튜디오</li></a>
                <a href="mart.html"><li class="navbar__menu__item" data-link="#skills">금융데이터마트</li></a>
                <a href="gallery.html"><li class="navbar__menu__item" data-link="#work">포트폴리오갤러리</li></a>
                <a href="admin.html"><li class="navbar__menu__item" data-link="#contact">작업관리자</li></a>
            </ul>
        </div>
        <!-- Toggle button -->
        <button class="navbar__toggle-btn">
            <i class="fas fa-bars"></i>
        </button>
    </nav>

    <section id="home">
     <div class="wrap">
  <!-- 텍스트 네비 -->
  <nav class="text-nav" id="textNav" aria-label="텍스트 네비"></nav>

  <!-- 진행률 -->
  <div class="header-row">
    <div style="font-weight:800">진행률</div>
    <div style="display:flex; align-items:center; gap:12px;">
      <div class="bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-label="진행률">
        <div class="fill" id="fill"></div>
      </div>
      <div class="percent" id="percent">0.0%</div>
    </div>
  </div>

  <!-- 스텝 박스 -->
  <section class="steps" id="steps" aria-label="단계"></section>
</div>

    </section> 

    <section id="about" class="section">
        <a href="studio.html" ><h3>1</h3></a>
        <a href="studio2.html" ><h3>2</h3></a>
        <a href="" ><h3>3</h3></a>
        <a href="" ><h3>4</h3></a>
        <a href="" ><h3>5</h3></a>
    </section>

    <section id="skills" class="section">

    </section>


</body>
</html>
<script>
/* =========================
   설정
   ========================= */
// 텍스트 네비 라벨(순수 글자)
const NAV_LABELS = ["Data Reader", "Data처리", "기술지표", "XGboost", "종목신청", "비중배분", "백테스팅"];

/* (A) 탭별 고정 스텝 구성: 각 탭마다 다른 개수/이름 */
const STEPS_BY_TAB = [
  ["요구정의","범위합의","일정수립"],                                    // 기본 (3개)
  ["수익률계산","레깅값계산","데이터라벨링","결측치처리"],                            // 설계 (4개)
  ["이동평균","수렴확산지수","표준편차","상대강도지수"],                         // 조달 (5개)
  ["변수설정","자료분할","초매개변수","매개변수탐색"],                      // 시공 (7개)
  ["변수설정","종목선정"],                                       // 검수 (3개)
  ["변수설정","비중배분","초매개변수"],                                // 인수인계 (4개)
  ["변수설정","포트폴리오","기간설정", "리밸런싱"]                                       // 운영 (3개)
];

/* (B) 매 클릭 랜덤 구성(원하면 활성화) */
const RANDOM_MODE = false; // true로 바꾸면, 같은 탭을 눌러도 매번 다른 개수로 생성

/* =========================
   상태
   ========================= */
let currentTab = 0;
// 각 탭의 스텝 상태 배열: 'empty' | 'done'; 탭마다 길이가 다를 수 있음
let tabStates = STEPS_BY_TAB.map(list => Array(list.length).fill("empty"));

/* =========================
   DOM
   ========================= */
const textNav  = document.getElementById('textNav');
const stepsEl  = document.getElementById('steps');
const fillEl   = document.getElementById('fill');
const percentEl= document.getElementById('percent');

/* =========================
   렌더: 텍스트 네비(균등폭)
   ========================= */
function renderTextNav(){
  textNav.innerHTML = '';
  NAV_LABELS.forEach((label, i) => {
    const el = document.createElement('span');
    el.className = 'tlink' + (i===currentTab ? ' current' : '');
    el.textContent = label;
    el.tabIndex = 0;
    el.setAttribute('role','button');
    el.addEventListener('click', ()=> onTabClick(i));
    el.addEventListener('keydown', e=>{
      if(e.key==='Enter' || e.key===' '){ e.preventDefault(); onTabClick(i); }
    });
    textNav.appendChild(el);
  });
}

/* =========================
   탭 클릭 → 스텝 구성/초기화
   ========================= */
function onTabClick(i){
  currentTab = i;

  // (A) 고정 모드: 탭별 스텝을 그대로 사용하되, 상태 배열 길이를 스텝 수에 맞춰 초기화
  if (!RANDOM_MODE) {
    const count = STEPS_BY_TAB[i].length;
    tabStates[i] = Array(count).fill('empty'); // ✅ 탭 전환 시 초기화
  }
  // (B) 랜덤 모드: 2~8개 사이로 임의 길이 생성(이름은 자동 생성)
  else {
    const count = Math.floor(Math.random()*7) + 2; // 2~8
    STEPS_BY_TAB[i] = Array.from({length:count}, (_,k)=>`작업 ${k+1}`);
    tabStates[i] = Array(count).fill('empty');     // ✅ 탭 전환 시 초기화
  }

  renderAll();
}

/* =========================
   렌더: 스텝 박스 (개수 가변)
   ========================= */
function renderSteps(){
  stepsEl.innerHTML = '';
  const names  = STEPS_BY_TAB[currentTab];
  const states = tabStates[currentTab];

  // 그리드 컬럼 수를 개수에 맞춰 자동/적절히 보이게(너무 적으면 넓게)
  const cols = Math.min(7, Math.max(3, names.length));
  stepsEl.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

  names.forEach((name, idx) => {
    const card = document.createElement('div');
    card.className = 'step' + (states[idx]==='done' ? ' done' : '');
    card.tabIndex = 0;
    card.innerHTML = `<div class="head">STEP ${idx+1}</div><div class="name">${name}</div>`;

    const toggle = () => {
      states[idx] = (states[idx]==='done') ? 'empty' : 'done';
      card.classList.toggle('done');
      updateProgress(states);
    };
    card.addEventListener('click', toggle);
    card.addEventListener('keydown', e=>{
      if(e.key==='Enter' || e.key===' ') { e.preventDefault(); toggle(); }
    });

    stepsEl.appendChild(card);
  });

  updateProgress(states);
}

/* =========================
   진행률(완료 개수 / 총 개수)
   ========================= */
function updateProgress(states){
  const done  = states.filter(s=>s==='done').length;
  const total = Math.max(states.length, 1);
  const pct   = Math.min(100, Math.max(0, (done/total)*100));
  fillEl.style.width = pct + '%';
  document.querySelector('.bar').setAttribute('aria-valuenow', pct.toFixed(1));
  percentEl.textContent = pct.toFixed(1) + '%';
}

/* =========================
   전체 렌더
   ========================= */
function renderAll(){
  renderTextNav();
  renderSteps();
}

/* 시작 */
renderAll();
</script>