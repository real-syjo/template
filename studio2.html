<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean AI</title>
    <meta name="description" content="Portfolio for world-renowned software engineer soyeon">
    <meta name="author" content="soyeon">

    <script src="https://kit.fontawesome.com/7ebfe642cb.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="studioStyle2.css"/>
    <script src="studio2.js" defer></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2.4.1/dist/email.min.js"> </script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
</head>

<body>
    <section id="home">
      <div id="stage" class="shrink-wrap">

          <!-- 기존 콘텐츠 -->
        <div class="shrink-scale">
          <div class="your-panel">
            <div class="wrap">
                <!-- 하단: 도넛 + 범례 -->
                <div class="card"  data-step="0">
                  <div class="main">
                     <div class="box" id="progressBox">
                      <div class="progress">
                        <div class="bar" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                          <div class="fill" id="chipProgress"></div>
                        </div>
                      </div>
                      <div class="percent" id="chipPercent">0%</div>
                    </div>
                   <div class="box" id="box">
                        <div class="slideshow-container">
                          <div class="slide">
                            투자전략 설계에 활용하고 싶은 알고리즘을 선택해주세요.
                          </div>
                          <div class="slide">
                           마우스를 올리면 각 알고리즘에 대한 설명을 확인할 수 있어요.
                          </div>
                        
                          

                          <!-- 버튼 -->
                           <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                          <a class="next" onclick="plusSlides(1)">&#10095;</a>

                          <!-- 점 -->
                          <div class="dots">
                            <span class="dot" onclick="currentSlide(1)"></span>
                            <span class="dot" onclick="currentSlide(2)"></span>
                            <span class="dot" onclick="currentSlide(3)"></span>
                          </div>
                        </div>
                        <div class="recommand" id="recommand">
                        </div> 
                        <div class="selectDataGroup" id="selectDataGroup">
                        </div> 
                      </div> 
                    </div> 
                  </div>
                  </div> 
                </div>
                
            </div>
          </div>
   
      <button id="directBtn">데이터 직접 선택하기</button> 
    </div>
    </section>

</body>
</html>

<script>
// 첫 번째 cbox 체크 시 슬라이드 문구 추가
document.addEventListener('change', (e) => {
  const firstCbox = document.querySelector('#recommand .cbox:first-child input[type="checkbox"]');
  if (!firstCbox) return;

  if (e.target === firstCbox && firstCbox.checked) {
    // alert 대신 슬라이드 문구 변경
    const slideContainer = document.querySelector(".slideshow-container");
    if (!slideContainer) return;

    // 기존 슬라이드/도트 제거
    slideContainer.querySelectorAll(".slide").forEach(s => s.remove());
    const dotsWrap = slideContainer.querySelector(".dots");
    if (dotsWrap) dotsWrap.innerHTML = "";

    // 새 문구 추가
    const div = document.createElement("div");
    div.className = "slide";
    div.textContent = "데이터부터 선택해 주세요.";
    div.style.display = "block"; // 첫 슬라이드만 보이게
    slideContainer.appendChild(div);

    // 점도 하나만
    if (dotsWrap) {
      const dot = document.createElement("span");
      dot.className = "dot active";
      dotsWrap.appendChild(dot);
    }

    // ✅ 2초 뒤 페이지 이동
    setTimeout(() => {
      if (window.parent) {
        window.parent.location.href = "studio.html";
      } else {
        window.location.href = "studio.html";
      }
    }, 1000); // 2000ms = 2초
  }
});


document.addEventListener('change', (e) => {
  // recommand 안에 있는 모든 체크박스 수집
  const cboxes = document.querySelectorAll('#recommand input[type="checkbox"]');
  if (cboxes.length < 2) return; // 최소 2개 이상일 때만
  
  const secondCbox = cboxes[1]; // 두 번째 체크박스 (0=첫번째, 1=두번째)

  if (e.target === secondCbox && secondCbox.checked) {
    // ✅ 슬라이드 문구 교체
    const slides = document.querySelectorAll(".slideshow-container .slide");
    if (slides.length > 0) {
      slides.forEach(s => s.style.display = "none"); // 기존 슬라이드 숨기기
    }

    // 새 문구 추가
    const slideContainer = document.querySelector(".slideshow-container");
    const div = document.createElement("div");
    div.className = "slide";
    div.textContent = "Linear Regression 알고리즘으로 투자전략을 만들어보겠습니다.";
    slideContainer.appendChild(div);

    // 새 슬라이드 표시
    div.style.display = "block";
  }
});



document.addEventListener('change', (e) => {
  const cboxes = document.querySelector('#recommand .cbox:nth-child(2) input[type="checkbox"]');
  if (cboxes.length < 2) return;   // 두 개 이상 있을 때만

  const secondCbox = cboxes[1];    // 0 = 첫 번째, 1 = 두 번째

  if (e.target === secondCbox && secondCbox.checked) {
    const slideContainer = document.querySelector(".slideshow-container");
    if (!slideContainer) return;

    let dotsWrap = slideContainer.querySelector(".dots");
    if (!dotsWrap) {
      dotsWrap = document.createElement("div");
      dotsWrap.className = "dots";
      slideContainer.appendChild(dotsWrap);
    }

    // 새 슬라이드
    const div = document.createElement("div");
    div.className = "slide";
    div.textContent = "XG부스트 알고리즘으로 투자전략을 만들어보겠습니다.";
    div.style.display = "none";
    slideContainer.appendChild(div);

    // 새 dot
    const dot = document.createElement("span");
    dot.className = "dot";
    dot.addEventListener("click", () => showSlides(dotsWrap.children.length));
    dotsWrap.appendChild(dot);
  }
});

const algoDescriptions = {
  "XG-Boost": "Gradient Boosting 기반으로 다수의 약한 결정트리를 결합해 높은 예측 성능을 내는 앙상블 알고리즘입니다",
  "Linear Regression": "Linear Regression은 입력 변수와 출력 변수 간의 선형 관계를 모델링합니다.",
  "Logistic Regression": "Logistic Regression은 이진 분류 문제를 해결하는 알고리즘입니다.",
  "Naive Bayes": "Naive Bayes는 조건부 확률을 기반으로 하는 간단하고 빠른 분류 알고리즘입니다.",
  "PCA": "PCA는 고차원 데이터를 저차원으로 축소하여 주요 특징을 추출합니다.",
  "Random Forest": "Random Forest는 여러 개의 의사결정나무를 학습시켜 앙상블로 예측하는 알고리즘입니다."
};
function showAlgoDescription(desc) {
  const slides = document.querySelectorAll(".slideshow-container .slide");

  // 모든 기존 슬라이드 숨김
  slides.forEach(s => s.style.display = "none");

  // 설명 슬라이드가 없으면 새로 생성
  const slideContainer = document.querySelector(".slideshow-container");
  let descSlide = slideContainer.querySelector(".slide.desc-slide");

  if (!descSlide) {
    descSlide = document.createElement("div");
    descSlide.className = "slide desc-slide";
    slideContainer.appendChild(descSlide);
  }

  descSlide.textContent = desc;
  descSlide.style.display = "block";
}

// 이벤트 위임: #recommand 안의 .cbox 감지
document.addEventListener("mouseover", (e) => {
  const box = e.target.closest("#recommand .cbox");
  if (!box) return;

  const title = box.querySelector(".title")?.textContent.trim();
  if (!title) return;

  const desc = algoDescriptions[title] || `${title} 설명이 준비되지 않았습니다.`;
  showAlgoDescription(desc);
});

document.addEventListener("mouseout", (e) => {
  const box = e.target.closest("#recommand .cbox");
  if (!box) return;

  // 마우스가 빠지면 첫 번째 슬라이드로 복원
  const slides = document.querySelectorAll(".slideshow-container .slide");
  slides.forEach(s => s.style.display = "none");
  if (slides[0]) slides[0].style.display = "block";
});

  (() => {
  let __slideTimer = null;

  // 안전장치: 페이지 숨김 시 일시정지(선택)
  function stopSlideShow() {
    clearInterval(__slideTimer);
    __slideTimer = null;
  }
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) stopSlideShow();
  });

  // 부모가 보내는 신호를 받은 뒤에만 시작
  window.addEventListener('message', (e) => {
    if (e?.data?.type === 'START_SLIDES') {
      window.startSlideShow(e.data.interval || 3000);
    }
  });

  
})();

// ===== #signup3 폼 ↔ 도넛 연동 (폼이 들어있는 카드 안의 도넛만 다시 그림) =====
// ===== #signup3 폼 ↔ 도넛 연동 (폼이 들어있는 카드 안의 도넛만 다시 그림) =====
// ✅ 진행률 바 업데이트 함수
// ✅ 칩 개수 기반 진행률 (추천DATA .chip + KW 시트 .kw-chip)
function updateChipProgress() {
  const total = document.querySelectorAll('#legend .chip, .kw-chip').length;
  const done  = document.querySelectorAll('#legend .chip.active, .kw-chip.active').length;

  const percent = total ? Math.round((done / total) * 100) : 0;

  const fill  = document.getElementById('chipProgress');
  const label = document.getElementById('chipPercent');

  if (fill)  fill.style.width = percent + '%';
  if (label) label.textContent = percent + '%';

  // (선택) 상단 단계 게이지 색 업데이트가 필요하면 유지
  if (typeof renderGauge === 'function' && typeof currentStep !== 'undefined') {
    blockStates[currentStep] = (done===0) ? 'empty' : (done<total ? 'partial' : 'done');
    renderGauge();
  }
}


// ✅ 칩 선택 시 프로그래스바 갱신하도록 수정
function updateDonutProgressFromChips(){
  updateChipProgress();
}


// 추천DATA 칩 토글(위임)
document.addEventListener('click', (e)=>{
  const chip = e.target.closest('#legend .chip');
  if (!chip) return;

  const label = chip.textContent.trim();
  const item  = legendData.find(d => d.label === label);
  if (!item) return;

  item.selected = !item.selected;
  chip.classList.toggle('active', item.selected);

  updateChipProgress();   // ✅ 진행률 갱신
});


(function markBluePersistently(){
  // 같은 도메인이면 직접 클래스 부여 (더 빠름)
  try {
    parent.document.getElementById('gauge')?.classList.add('iframe-mark');
  } catch (_) {
    // 교차 도메인이면 postMessage 사용
    parent.postMessage({ type: 'MARK_GBLOCKS_01' }, '*');
  }
})();


</script>
